<html>
<head>
	<title>Music Thing</title>

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20150601/script/soundmanager2-jsmin.js"></script>
	
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css">

	<script type="text/javascript" src="js/util.js"></script>
	<script type="text/javascript" src="js/subsonic.js"></script>

	<script type="text/jsx" src="js/components/common.js"></script>
	<script type="text/jsx" src="js/components/player.js"></script>
	<script type="text/jsx" src="js/components/browser.js"></script>
	<script type="text/jsx" src="js/components/playlist.js"></script>

	<link rel="stylesheet" href="style.css">

	<script type="text/jsx">
		$(document).ready(function() {
			soundManager.setup({
				url: '//cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20150601/swf/',
				flashVersion: 9, 
				preferFlash: false,
				onready: function() {
					// Ready to use; soundManager.createSound() etc. can now be called.
				}
			});

			// TODO these properties should be populated from local storage, supplied by the user via setup view
			var subsonic = new Subsonic("http://192.168.0.3:4242", "admin", "hpserver", "1.12.0", "thing");

			var player = React.render(
				<Player subsonic={subsonic} />,
				document.getElementById('player-frame')
			);

			var playlists = React.render(
				<PlaylistManager subsonic={subsonic} player={player} iconSize="20" />,
				document.getElementById('playlist-playlists')
			);

			var selection = React.render(
				<Selection subsonic={subsonic} player={player} iconSize="30" />,
				document.getElementById('playlist-selection')
			);

			React.render(
				<ArtistList subsonic={subsonic} iconSize="30" selection={selection} />,
				document.getElementById('artistList')
			);

			var tabs = [];
			tabs.push({id:"selection", title: "Selection", active: true});
			tabs.push({id:"playlists", title: "Playlists"});
			tabs.push({id:"playing", title: "Playing"});

			var tabGroup = <TabGroup tabs={tabs} iconSize="20" />;

			React.render(
				tabGroup,
				document.getElementById('playlist-menu')
			);
		});

	</script>
</head>
<body>
	<div id="frames">
		<div id="browser-frame">
			<div id="artistList"></div>
			<!-- TODO string filter -->
		</div>
		<div id="player-frame"></div>
		<div id="playlist-frame">
			<div id="playlist-menu"></div>
			<div id="playlist-content">
				<div id="playlist-selection" data-tab="selection" class="ui active tab"></div>
				<div id="playlist-playlists" data-tab="playlists" class="ui tab"></div>
				<div id="playlist-playing" data-tab="playing" class="ui tab"></div>
			</div>
		</div>
	</div>
</body>
</html>