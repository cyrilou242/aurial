<html>
<head>
	<title>Music Thing</title>

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css">

	<script type="text/javascript" src="js/script.js"></script>
	<script type="text/jsx" src="js/components/common.js"></script>
	<script type="text/jsx" src="js/components/browser.js"></script>
	<script type="text/jsx" src="js/components/playlist.js"></script>

	<link rel="stylesheet" href="style.css">

	<script type="text/jsx">
		Subsonic = function(url, user, password, version, appName) {
			this.url = url;
			this.user = user;
			this.password = password;
			this.version = version;
			this.appName = appName;

			this.getUrl = function(func, params) {
				var result = this.url + "/rest/" + func + ".view?";
				var _params = {
					u: this.user,
					p: this.password,
					v: this.version,
					c: appName,
					f: "json"
				};

				$.each(_params, function(k, v) {
					result += k + "=" + v + "&";
				});

				$.each(params, function(k, v) {
					result += k + "=" + v + "&";
				});

				return result;
			}
		}


		$(document).ready(function() {
			// TODO these properties should be populated from local storage, supplied by the user via setup view
			var subsonic = new Subsonic("http://192.168.0.3:4242", "admin", "hpserver", "1.12.0", "thing");

			React.render(
				<ArtistList subsonic={subsonic} iconSize="30" />,
				document.getElementById('artistList')
			);


			var tabs = [];
			tabs.push({id:"1", title: "Hello"});
			tabs.push({id:"2", title: "World"});

			var tabGroup = <TabGroup tabs={tabs} iconSize="20" />;

			React.render(
				tabGroup,
				document.getElementById('playlist-menu')
			);

			/*React.render(
				<PlaylistCollection subsonic={subsonic} iconSize="20" />,
				document.getElementById('playlistView')
			);*/
		});

	</script>
</head>
<body>
	<div id="frames">
		<div id="browser-frame">
			<div id="artistList"></div>
			<!-- TODO string filter -->
		</div>
		<div id="player-frame"></div>
		<div id="playlist-frame">
			<div id="playlist-menu"></div>
			<div id="playlist-content">
				<div id="playlist-selection"></div>
				<div id="playlist-playlists"></div>
				<div id="playlist-playing"></div>
			</div>
		</div>
	</div>
</body>
</html>